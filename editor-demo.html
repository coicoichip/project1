<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/normalize.css">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="css/style.css"/>
</head>


<body>
<div class="container">
    <div class="row" id="row-show" style="border-top:3px solid #000;">    
        <div class="tools">
            <div class="tool-icon" title="Insert Image (Ctrl+P)" onclick="insertImg()">
                <a href="#">
                    <i class="fa fa-picture-o" aria-hidden="true"></i>
                </a>
            </div>
            <div class="tool-icon" title="Insert Video" onclick="insertVideo()">
                <a href="#">
                    <i class="fa fa-video-camera" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>
    <div class="row" id="row-show" style="border-top:3px solid #000;">   
        <div class="tools">
            <div id="zoom-in" class="tool-icon" title="Zoom in">
                <a href="#">
                    <i class="fa fa-search-plus" aria-hidden="true"></i>
                </a>
            </div>
            <div id="zoom-out" class="tool-icon" title="Zoom out">
                <a href="#">
                    <i class="fa fa-search-minus" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>
    
    <!--contentArea-->
    <div class="row">
        <div id="editor-doc" style="overflow:auto;" contenteditable>
            <p>
                aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
            </p>
        </div>
    </div>
</div>
    <div id="cal1">&nbsp;</div>
    <div id="cal2">&nbsp;</div>
    <button style="position:absolute;display:none;" id="demo-btn" type="button" class="btn btn-primary">Demo</button>

</body>
<script type="text/javascript" src="js/script.js"></script>

</html>




<!-- Selection text -->
<script>

var ele = document.getElementById('demo-btn');
var sel = window.getSelection();
var rel1= document.createRange();
rel1.selectNode(document.getElementById('cal1'));
var rel2= document.createRange();
rel2.selectNode(document.getElementById('cal2'));
window.addEventListener('mouseup', function () {
    if (!sel.isCollapsed) {
        //debugger;
        var r = sel.getRangeAt(0).getBoundingClientRect();
        var rb1 = rel1.getBoundingClientRect();
        var rb2 = rel2.getBoundingClientRect();
        ele.style.top = (r.bottom - rb2.top)*100/(rb1.top-rb2.top) + 'px'; //this will place ele below the selection
        ele.style.left = ( (r.left - rb2.left + 10   )*100/(rb1.left-rb2.left) ) + 'px'; //this will align the right edges together
        //code to set content
        console.log(r.right);
        console.log(rb1.top);
        console.log(rb2.top);
        console.log(ele.style.top);
        console.log(ele.style.left);


        ele.style.display = 'block';
    }
});
window.addEventListener('mousedown', function () {
    ele.style.display = 'none';
});
$(document).ready(function () {
        $(window).resize(function () { 
            ele.style.display = 'none';
        });
    });
</script>


</html>