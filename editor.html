<!DOCTYPE html>
<html>

<head>
  <title></title>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <link rel="stylesheet" type="text/css" href="editor.css">
  <script src="js/jquery.min.js"></script>



  <script type="text/javascript">
    var oDoc;
    var oCode;
    var sDefTxt;

    //khởi đầu

    function initDoc() {
      oDoc = document.getElementById("editor-doc");
      sDefTxt = oDoc.innerHTML;
      initCode();
    }

    function initCode() {
      oCode = document.getElementById("editor-code");
      setCodeMode(true);
    }

    function validateMode() {
      if (!document.compForm.switchMode.checked) {
        return true;
      }
      alert("Uncheck \"Show HTML\".");
      oDoc.focus();
      return false;
    }

    //chuyển đổi text vs code

    function setCodeMode() {
      var oContent;
      //console.log(oDoc);
      oContent = document.createTextNode(oDoc.innerHTML);
      //console.log(oContent);
      oCode.innerHTML = "";
      var oPre = document.createElement("pre");
      //console.log(oPre);
      oCode.contentEditable = false;
      oPre.id = "sourceText";
      oPre.contentEditable = true;
      oPre.appendChild(oContent);
      oCode.appendChild(oPre);
      oCode.focus();
    }

    function setDocMode() {
      if (document.all) {
        //console.log(1);
        oDoc.innerHTML = oDoc.innerText;
      } else {
        //console.log(1);
        //console.log(oDoc.innerHTML);
        oContent = document.createRange();
        //console.log(oDoc.firstChild);
        oContent.selectNodeContents(oCode.firstChild);
        //console.log(oContent.toString());
        oDoc.innerHTML = oContent.toString();
      }
      oDoc.contentEditable = true;
    }

    // forn chữ

    function formatDoc(sCmd, sValue) {
      // console.log("1");
      if (sCmd == 'h1' || sCmd == 'h2' || sCmd == 'h3' || sCmd == 'h4' || sCmd == 'h5' || sCmd == 'h6' || sCmd == 'p') {
        document.execCommand('formatBlock', false, sCmd);
        oDoc.focus();
        setCodeMode();
      } else if (sCmd == 'createLink' || sCmd == 'insertimage') {
        url = prompt('Enter the link here: ', 'http:\/\/');
        document.execCommand(sCmd, false, url);
        oDoc.focus();
        setCodeMode();
      } else if (sCmd == 'insertHTML') {
        url = prompt('Enter embed code: ', 'Embed here');
        document.execCommand(sCmd, false, url);
        oDoc.focus();
        setCodeMode();
      } else {
        if (document.queryCommandSupported(sCmd) == false) {
          alert('The command ' + sCmd + ' is not support your browser');
          // console.log('hello');
        } else {
          document.execCommand(sCmd, false, sValue);
          // console.log('hello22');
          // console.log(document.queryCommandSupported(sCmd));
          oDoc.focus();
          setCodeMode();
        }
      }
    }


    function printDoc() {
      var oPrntWin = window.open("", "_blank",
        "width=450,height=470,left=400,top=100,menubar=yes,toolbar=no,location=no,scrollbars=yes");
      oPrntWin.document.open();
      oPrntWin.document.write("<!doctype html><html><head><title>Print<\/title><\/head><body onload=\"print();\">" +
        oDoc.innerHTML + "<\/body><\/html>");
      oPrntWin.document.close();
    }


    //press key to change
    // $(document).bind('keypress', function (e) {
    //   if(event.which === 65 && event.shiftKey){
    //     alert('you press shift a');
    //   }
    // });
  </script>

</head>

<body onload="initDoc()" class='container-fluid'>
  <form class='col-md-6' name="compForm" method="post" action="sample.php" onsubmit="if(validateMode()){this.myDoc.value=oDoc.innerHTML;return true;}return false;">

    <div id="toolBar1">
      <select onchange="formatDoc('formatblock',this[this.selectedIndex].value);this.selectedIndex=0;">
        <option selected>- formatting -</option>
        <option value="h1">Title 1 &lt;h1&gt;</option>
        <option value="h2">Title 2 &lt;h2&gt;</option>
        <option value="h3">Title 3 &lt;h3&gt;</option>
        <option value="h4">Title 4 &lt;h4&gt;</option>
        <option value="h5">Title 5 &lt;h5&gt;</option>
        <option value="h6">Subtitle &lt;h6&gt;</option>
        <option value="p">Paragraph &lt;p&gt;</option>
        <option value="pre">Preformatted &lt;pre&gt;</option>
      </select>
      <select onchange="formatDoc('fontname',this[this.selectedIndex].value);this.selectedIndex=0;">
        <option class="heading" selected>- font -</option>
        <option>Arial</option>
        <option>Arial Black</option>
        <option>Courier New</option>
        <option>Times New Roman</option>
      </select>
      <select onchange="formatDoc('fontsize',this[this.selectedIndex].value);this.selectedIndex=0;">
        <option class="heading" selected>- size -</option>
        <option value="1">Very small</option>
        <option value="2">A bit small</option>
        <option value="3">Normal</option>
        <option value="4">Medium-large</option>
        <option value="5">Big</option>
        <option value="6">Very big</option>
        <option value="7">Maximum</option>
      </select>
      <select onchange="formatDoc('forecolor',this[this.selectedIndex].value);this.selectedIndex=0;">
        <option class="heading" selected>- color -</option>
        <option value="red">Red</option>
        <option value="blue">Blue</option>
        <option value="green">Green</option>
        <option value="black">Black</option>
      </select>
      <select onchange="formatDoc('backcolor',this[this.selectedIndex].value);this.selectedIndex=0;">
        <option class="heading" selected>- background -</option>
        <option value="red">Red</option>
        <option value="green">Green</option>
        <option value="black">Black</option>
      </select>
    </div>
    <div id="toodBar">
      <img class="intLink" title="Clean" onclick="if(confirm('Are you sure?')){oDoc.innerHTML=sDefTxt};" src="data:image/gif;base64,R0lGODlhFgAWAIQbAD04KTRLYzFRjlldZl9vj1dusY14WYODhpWIbbSVFY6O7IOXw5qbms+wUbCztca0ccS4kdDQjdTLtMrL1O3YitHa7OPcsd/f4PfvrvDv8Pv5xv///////////////////yH5BAEKAB8ALAAAAAAWABYAAAV84CeOZGmeaKqubMteyzK547QoBcFWTm/jgsHq4rhMLoxFIehQQSAWR+Z4IAyaJ0kEgtFoLIzLwRE4oCQWrxoTOTAIhMCZ0tVgMBQKZHAYyFEWEV14eQ8IflhnEHmFDQkAiSkQCI2PDC4QBg+OAJc0ewadNCOgo6anqKkoIQA7"
      />
      <img class="intLink" title="Print" onclick="printDoc();" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9oEBxcZFmGboiwAAAAIdEVYdENvbW1lbnQA9syWvwAAAuFJREFUOMvtlUtsjFEUx//n3nn0YdpBh1abRpt4LFqtqkc3jRKkNEIsiIRIBBEhJJpKlIVo4m1RRMKKjQiRMJRUqUdKPT71qpIpiRKPaqdF55tv5vvusZjQTjOlseUkd3Xu/3dPzusC/22wtu2wRn+jG5So/OCDh8ycMJDflehMlkJkVK7KUYN+ufzA/RttH76zaVocDptRxzQtNi3mRWuPc+6cKtlXZ/sddP2uu9uXlmYXZ6Qm8v4Tz8lhF1H+zDQXt7S8oLMXtbF4e8QaFHjj3kbP2MzkktHpiTjp9VH6iHiA+whtAsX5brpwueMGdONdf/2A4M7ukDs1JW662+XkqTkeUoqjKtOjm2h53YFL15pSJ04Zc94wdtibr26fXlC2mzRvBccEbz2kiRFD414tKMlEZbVGT33+qCoHgha81SWYsew0r1uzfNylmtpx80pngQQ91LwVk2JGvGnfvZG6YcYRAT16GFtW5kKKfo1EQLtfh5Q2etT0BIWF+aitq4fDbk+ImYo1OxvGF03waFJQvBCkvDffRyEtxQiFFYgAZTHS0zwAGD7fG5TNnYNTp8/FzvGwJOfmgG7GOx0SAKKgQgDMgKBI0NJGMEImpGDk5+WACEwEd0ywblhGUZ4Hw5OdUekRBLT7DTgdEgxACsIznx8zpmWh7k4rkpJcuHDxCul6MDsmmBXDlWCH2+XozSgBnzsNCEE4euYV4pwCpsWYPW0UHDYBKSWu1NYjENDReqtKjwn2+zvtTc1vMSTB/mvev/WEYSlASsLimcOhOBJxw+N3aP/SjefNL5GePZmpu4kG7OPr1+tOfPyUu3BecWYKcwQcDFmwFKAUo90fhKDInBCAmvqnyMgqUEagQwCoHBDc1rjv9pIlD8IbVkz6qYViIBQGTJPx4k0XpIgEZoRN1Da0cij4VfR0ta3WvBXH/rjdCufv6R2zPgPH/e4pxSBCpeatqPrjNiso203/5s/zA171Mv8+w1LOAAAAAElFTkSuQmCC">
      <a href="#" data-command='undo' onclick="formatDoc('undo')">
        <i class='fa fa-undo'></i>
      </a>
      <a href="#" data-command='redo' onclick="formatDoc('redo')">
        <i class='fa fa-repeat'></i>
      </a>
      <!--
  <i class='fa fa-font' style='color:#C96;'></i>
  <i class='fa fa-font' style='background:#C96;'></i>-->

      <a href="#" onclick="formatDoc('subscript')">
        <i class="fa fa-subscript" aria-hidden="true"></i>
      </a>
      <a href="#" onclick="formatDoc('superscript')">
        <i class="fa fa-superscript" aria-hidden="true"></i>
      </a>
      <a href="#" data-command='bold' onclick="formatDoc('bold')">
        <i class='fa fa-bold'></i>
      </a>
      <a href="#" data-command='italic' onclick="formatDoc('italic')">
        <i class='fa fa-italic'></i>
      </a>
      <a href="#" data-command='underline' onclick="formatDoc('underline')">
        <i class='fa fa-underline'></i>
      </a>
      <a href="#">
        <i class="fa fa-strikethrough" onclick="formatDoc('strikeThrough')"></i>
      </a>
      <!--<a href="#" data-command='strikeThrough' ><i class='fa fa-strikethrough'></i></a>-->
      <a href="#" data-command='justifyLeft' onclick="formatDoc('justifyleft')">
        <i class='fa fa-align-left'></i>
      </a>
      <a href="#" data-command='justifyCenter' onclick="formatDoc('justifycenter')">
        <i class='fa fa-align-center'></i>
      </a>
      <a href="#" data-command='justifyRight' onclick="formatDoc('justifyright')">
        <i class='fa fa-align-right'></i>
      </a>
      <a href="#">
        <i class="fa fa-align-justify" aria-hidden="true" onclick="formatDoc('justifyFull')"></i>
      </a>

      <!--<a href="#" data-command='justifyFull'><i class='fa fa-align-justify'></i></a>-->
      <a href="#" data-command='indent'>
        <i class='fa fa-indent' onclick="formatDoc('indent')"></i>
      </a>
      <a href="#" data-command='outdent'>
        <i class='fa fa-outdent' onclick="formatDoc('outdent')"></i>
      </a>
      <a href="#">
        <i class='fa fa-list-ol' onclick="formatDoc('insertOrderedList')"></i>
      </a>
      <a href="#">
        <i class='fa fa-list-ul' onclick="formatDoc('insertUnorderedList')"></i>
      </a>
      <!--
  <a href="#" data-command='insertUnorderedList'><i class='fa fa-list-ul'></i></a>
  <a href="#" data-command='insertOrderedList'><i class='fa fa-list-ol'></i></a>
  <a href="#" data-command='h1'>H1</a>
  <a href="#" data-command='h2'>H2</a>
  <a href="#" data-command='createlink'><i class='fa fa-link'></i></a>
  <a href="#" data-command='unlink'><i class='fa fa-unlink'></i></a>
  <a href="#" data-command='insertimage'><i class='fa fa-image'></i></a>
  <a href="#" data-command='p'>P</a>
  <a href="#" data-command='subscript'><i class='fa fa-subscript'></i></a>
  <a href="#" data-command='superscript'><i class='fa fa-superscript'></i></a>
-->
      <a href="#">
        <i class="fa fa-link" aria-hidden="true" onclick="formatDoc('createLink')"></i>
      </a>
      <a href="#">
        <i class='fa fa-unlink' onclick="formatDoc('unlink')"></i>
      </a>
      <a href="#">
        <i class="fa fa-picture-o" aria-hidden="true" onclick="formatDoc('insertimage')"></i>
      </a>
      <a href="#">
        <i class="fa fa-video-camera" aria-hidden="true" onclick="formatDoc('insertHTML')"></i>
      </a>

      <a href="#" data-command='copy'>
        <i class='fa fa-files-o' onclick="formatDoc('copy')"></i>
      </a>
      <a href="#" data-command='cut'>
        <i class='fa fa-scissors' onclick="formatDoc('cut')"></i>
      </a>
      <a href="#" data-command='paste'>
        <i class='fa fa-clipboard' onclick="formatDoc('paste')"></i>
      </a>
    </div>


    <div id='editor-doc' contenteditable onkeyup="setCodeMode();">
      <p> coicoichip </p>
    </div>
  </form>
  <form class='col-md-6' name="compForm" method="post" action="sample.php" onsubmit="if(validateMode()){this.myDoc.value=oDoc.innerHTML;return true;}return false;">
    <div id='editor-code' contenteditable onkeyup="setDocMode()">
    </div>
  </form>
</body>
<script>
  var editor = document.getElementById('editor-doc');
  editor.addEventListener("paste", function (e) {
    e.preventDefault();

    if (e.clipboardData) {
      content = (e.originalEvent || e).clipboardData.getData('text/plain');
      console.log(content);
      document.execCommand('insertText', false, content);
      oDoc.focus();
      setCodeMode();
    } else if (window.clipboardData) {
      content = window.clipboardData.getData('Text');
      console.log(content);
      document.selection.createRange().pasteHTML(content);
      oDoc.focus();
      setCodeMode();
    }
  });
</script>

</html>